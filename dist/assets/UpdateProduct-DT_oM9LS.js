import{u as K,x as V,a as x,r as s,q as W,v as Y,A as Z,j as e,aC as N,D as C,aD as ee,aE as te}from"./index-UJMJvy5A.js";import{S as d}from"./react-select.esm-CVdv_GDD.js";import{L as se}from"./Loading-CpeICPhF.js";import{F as ae}from"./PhotoIcon-C1VAmwDa.js";import"./emotion-react.browser.esm-CiXsp4oA.js";const de=()=>{const n=K(),{id:i}=V(),{CategoryData:g}=x(t=>t.category),{GetallBrand:h}=x(t=>t.brand),{productDetails:o,loading:w}=x(t=>t.products),[S,k]=s.useState([]),[D,z]=s.useState([]),[b,E]=s.useState(""),[y,O]=s.useState(""),[m,I]=s.useState([]),[f,j]=s.useState([]),[u,p]=s.useState([]),[r,v]=s.useState({productName:"",price:"",discount:"",quantity:"",description:""}),P=["S","M","L","XL","XXL","40","41","42","43","44","45"],q=["red","green","black","yellow","white","pink","blue"],F=[{value:"hot",label:"Hot"},{value:"new",label:"New"},{value:"sale",label:"Sale"},{value:"cool",label:"Cool"}],L=P.map(t=>({value:t,label:t})),B=q.map(t=>({value:t,label:t})),[R,U]=s.useState([]),[M,T]=s.useState([]),c=t=>{const{name:a,value:l}=t.target;v({...r,[a]:l})},_=t=>E(t.value),A=t=>O(t.label),G=t=>{const a=Array.from(t.target.files);p(l=>[...l,...a])},X=t=>{t.preventDefault();const a=Array.from(t.dataTransfer.files);p(l=>[...l,...a])},H=t=>t.preventDefault(),Q=(t,a)=>{n(te({imageUrl:t,productId:a})),j(f.filter(l=>l!==t)),C.success("Image deleted successfully")},$=t=>{if(t.preventDefault(),!b)return C.error("Please select a category");const a={"Content-Type":"multipart/form-data"};n(ee({...r,files:u,colors:M.map(l=>l.value),sizes:R.map(l=>l.value),type:m.value?m.value:o.type,brand:y||o.brand,categoryId:b,config:a,id:i}))};return s.useEffect(()=>{n(W()),n(Y())},[n]),s.useEffect(()=>{k(g.map(t=>({value:t._id,label:t.categoryName})))},[g]),s.useEffect(()=>{z(h.map(t=>({value:t._id,label:t.name})))},[h]),s.useEffect(()=>{n(Z({productid:i}))},[i]),s.useEffect(()=>{o&&(v({productName:o.productName||"",price:o.price||"",discount:o.discount||"",quantity:o.quantity||"",description:o.description||""}),j(o.images||[]))},[o]),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx("h2",{className:"text-center text-2xl font-bold mb-6",children:"Update Product"}),e.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",onSubmit:$,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Product Name"}),e.jsx("input",{onChange:c,value:r.productName,name:"productName",type:"text",required:!0,className:"mt-2 block w-full rounded-md border py-2 px-3 text-gray-900 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Category"}),e.jsx(d,{onChange:_,placeholder:"Select category",options:S})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Brand"}),e.jsx(d,{onChange:A,placeholder:"Select brand",options:D})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Type"}),e.jsx(d,{value:m,onChange:I,options:F})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Discount"}),e.jsx("input",{onChange:c,value:r.discount,name:"discount",type:"number",className:"mt-2 block w-full rounded-md border py-2 px-3 text-gray-900 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Price"}),e.jsx("input",{onChange:c,value:r.price,name:"price",type:"number",className:"mt-2 block w-full rounded-md border py-2 px-3 text-gray-900 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Quantity"}),e.jsx("input",{onChange:c,value:r.quantity,name:"quantity",type:"number",className:"mt-2 block w-full rounded-md border py-2 px-3 text-gray-900 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Sizes"}),e.jsx(d,{isMulti:!0,options:L,onChange:U})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Colors"}),e.jsx(d,{isMulti:!0,options:B,onChange:T})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900",children:"Description"}),e.jsx("textarea",{onChange:c,value:r.description,name:"description",rows:3,className:"mt-2 block w-full rounded-md border py-2 px-3 text-gray-900 shadow-sm"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"mb-2 font-medium",children:"Existing Images"}),e.jsx("div",{className:"flex flex-wrap gap-4",children:f.map((t,a)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t,alt:"",className:"w-24 h-24 object-cover border rounded"}),e.jsx(N,{onClick:()=>Q(t,o._id),className:"absolute -top-2 -right-2 text-red-600 cursor-pointer",size:20})]},a))})]}),e.jsxs("div",{onDrop:X,onDragOver:H,className:"md:col-span-2 border-2 border-dashed border-gray-400 rounded-lg p-6 flex flex-col items-center justify-center cursor-pointer",children:[e.jsx(ae,{className:"h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Drag & drop images here or click to upload"}),e.jsx("input",{type:"file",multiple:!0,className:"hidden",id:"file-upload",onChange:G}),e.jsx("label",{htmlFor:"file-upload",className:"mt-2 px-4 py-2 bg-black text-white rounded cursor-pointer",children:"Browse Files"}),e.jsx("div",{className:"flex flex-wrap gap-4 mt-4",children:u.map((t,a)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(t),alt:"preview",className:"w-24 h-24 object-cover border rounded"}),e.jsx(N,{onClick:()=>p(u.filter((l,J)=>J!==a)),className:"absolute -top-2 -right-2 text-red-600 cursor-pointer",size:20})]},a))})]}),e.jsx("div",{className:"md:col-span-2",children:w?e.jsx(se,{}):e.jsx("button",{type:"submit",className:"w-full py-3 rounded-md bg-black text-white font-semibold hover:bg-gray-800",children:"Update Product"})})]})]})};export{de as default};
