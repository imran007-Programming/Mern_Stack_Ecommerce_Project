import{c as N,a as y,u as g,r as n,j as e,S as b,X as w,D as v,Y as k,f as d,Z as C,d as A}from"./index-DuIeuVxB.js";import{I as q}from"./index.esm-DeEIVifO.js";const T=()=>{const x=N(),{getCartProduct:r}=y(t=>t.cart),c=g(),[o,m]=n.useState(0),[l,a]=n.useState(!1),p=()=>{const t=r.reduce((s,i)=>s+i.details.price*i.quantity,0);m(t)};n.useEffect(()=>{p()},[r]);const u=(t,s)=>{a(!0),c(A({productid:t,quantity:s})).then(()=>c(d())).catch(D=>{}).finally(()=>a(!1))},h=t=>{a(!0),c(C({productid:t})).then(()=>c(d())).catch(s=>console.error(s)).finally(()=>a(!1))},j=t=>{a(!0),v.success("Product successfully removed from cart"),c(k({productid:t})).then(()=>{c(d()),a(!1)})},f=({data:t})=>{const s=()=>{t.quantity<5&&u(t.productid,1)},i=()=>{t.quantity>1&&h(t.productid)};return e.jsxs("tr",{className:"border-t  border-gray-300 w-full",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.jsxs("div",{className:"relative flex items-center space-x-4",children:[e.jsx("img",{className:"w-20 h-20 object-cover",src:t.details.images[0],alt:t.details.productName}),e.jsx("div",{className:"absolute top-0 -left-2 flex items-center justify-center",children:e.jsx(q,{onClick:()=>j(t.productid),size:20,className:"cursor-pointer w-5 h-5 bg-white rounded-full shadow-[0px_4px_6px_2px_rgba(0,0,0,0.3)] p-1"})})]})}),e.jsx("td",{children:e.jsx("div",{children:e.jsx("h1",{className:"text-sm font-medium text-gray-900",children:t.details.productName.length>20?`${t.details.productName.substring(0,50)}...`:t.details.productName})})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",t.details.price]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex h-[40px]",children:[e.jsx("button",{onClick:()=>i(t.productid),className:`border p-[.5rem] cursor-pointer ${t.quantity===1||l?"bg-[#FAFAFA] cursor-not-allowed":"bg-[#DADADA]"}`,disabled:l,children:"-"}),e.jsx("div",{className:"border p-[.5rem]",children:t.quantity}),e.jsx("button",{disabled:t.quantity===5||l,onClick:()=>s(t.productid,t.quantity),className:`border p-[.5rem] cursor-pointer ${t.quantity===5||l?"bg-[#FAFAFA] cursor-not-allowed":"bg-[#DADADA]"}`,children:"+"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",t.details.price*t.quantity]})]})};return e.jsxs("div",{className:"",children:[l&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black opacity-50 flex justify-center items-center",children:e.jsx(b,{type:"spin",color:"white"})}),r?.length>0?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 pt-6 ",children:[e.jsxs("div",{className:"p-6 shadow-lg ",children:[e.jsxs("h2",{className:"text-2xl font-bold",children:["Shopping Cart (",r.length,")"]}),e.jsx("div",{className:"overflow-auto mt-4",children:e.jsxs("table",{className:" table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-md font-medium text-black uppercase tracking-wider",children:"Picture"}),e.jsx("th",{className:"px-4 py-3 text-left text-md font-medium text-black uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4  py-3 text-left text-md font-medium text-black uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-4  py-3 text-left text-md font-medium text-black uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-4   py-3 text-left text-md font-medium text-black uppercase tracking-wider",children:"Subtotal"})]})}),e.jsx("tbody",{children:r.map((t,s)=>e.jsx(f,{data:t},s))})]})})]}),e.jsxs("div",{className:"p-6 shadow-lg mt-4 xl:mt-0 col-span-1",children:[e.jsx("p",{className:"text-lg text-center font-semibold",children:"CART TOTALS"}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("p",{className:"text-sm",children:"Subtotal:"}),e.jsxs("p",{className:"ml-auto text-sm",children:["$",o]})]}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm",children:"Total amount (including VAT)"}),e.jsxs("p",{className:"ml-auto text-sm",children:["$",o]})]}),e.jsx("div",{className:"flex items-center justify-center mt-12",children:e.jsx("button",{onClick:()=>x("/viewcart/checkout"),className:"text-white bg-black p-3 text-center text-sm mt-3 uppercase cursor-pointer flex justify-center items-center w-auto",children:e.jsx("span",{children:" Proceed to Checkout"})})})]})]}):e.jsxs("div",{className:"flex flex-col justify-center items-center pt-15",children:[e.jsx(w,{className:"opacity-20",size:130}),e.jsx("p",{className:"font-bold text-xl",children:"No products in the cart"})]})]})};export{T as default};
